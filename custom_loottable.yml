# Custom Loot Table
# Tyler J. Sawyer
# 4-7-14
# Defines custom loot items for particular mobs when they are slain.

"customLootTable":
  type: world
  events:
    on entity death:
      - if <context.damager.is_player> {
        - if <context.entity.entity_type> == "Enderman" {
          - drop "i@<proc:LootTable_Enderman>" location:<context.entity.location>
          }
        - if <context.entity.entity_type> == "Zombie" {
          - narrate targets:<context.damager> "<yellow>You killed a <context.entity.entity_type>!"
          }
        }

# Procedure based on an example from :
# http://scripts.citizensnpcs.co/view/34aapf
# 
"LootTable_Enderman":
    type: procedure

    script:
    - define roll <util.random.int[1].to[100]>
    - if %roll% >= 0 && %roll% < 75 define quality "Common"
      else if %roll% >= 75 && %roll% < 92 define quality "Uncommon"
      else if %roll% >= 92 && %roll% < 98 define quality "Rare"
      else if %roll% >= 98 define quality "Epic"
 
    - if %quality% == Common {
      - random 5
      - determine "Enderparts"
      - determine "Endersoul" 
      - determine "Enderdust"
      - determine "Enderthread"
      - determine "Endermold"
      }
 
    - if %quality% == Uncommon {
        - random 10
        - determine "Enderplate Rings"
        - determine "Enderplate Block"
        - determine "Sword of Ender"
        - determine "Ender Scythe"
        - determine "Enderplate Chestpiece"
        - determine "Enderplate Leggings" 
        - determine "Enderplate Boots"
        - determine "Enderplate Helm" 
        - determine "Enderfish"
        - determine "Endercookie"
        }
 
    - if %quality% == Rare {
        - random 2
        - determine "Darkblade"
        - determine "Digmaster 5000"
        - determine "Runed Enderplate Helm"
        - determine "Runed Enderplate Chestpiece"
        - determine "Runed Enderplate Leggings"
        - determine "Runed Enderplate Boots"
        }
 
    - if %quality% == Epic {
        - random 2
        - determine "Rune of Healing"
        - determine "Journeyman Boots"
        }

