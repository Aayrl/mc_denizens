# Custom Loot Table
# Tyler J. Sawyer
# 4-7-14
# Defines custom loot items for particular mobs when they are slain.

"customLootTable":
  type: world
  events:
    on entity death:
      - if <context.damager.is_player> {
        - if <context.entity.entity_type> == "Skeleton" {
          - narrate targets:<context.damager> "<yellow>You killed a <context.entity.entity_type>!"
          - drop "i@<proc:LootTable_Skeleton>" location:<context.entity.location>
          }
        - else if <context.entity.entity_type> == "Zombie" {
          - narrate targets:<context.damager> "<yellow>You killed a <context.entity.entity_type>!"
          }
        }

# Procedure based on an example from :
# http://scripts.citizensnpcs.co/view/34aapf
# 
"LootTable_Skeleton":
    type: procedure

    script:
    - define roll <util.random.int[1].to[100]>
    - if %roll% >= 0 && %roll% < 90 define quality "Common"
      else if %roll% >= 85 && %roll% < 93 define quality "Uncommon"
      else if %roll% >= 93 && %roll% < 98 define quality "Rare"
      else if %roll% >= 98 define quality "Epic"
 
    - if %quality% == Common {
      - random 2
      - determine "Enderparts"
      - determine "Endersoul" 
      }
 
    - if %quality% == Uncommon {
        - random 2
        - determine "Sword of Ender"
        - determine "Ender Scythe"
        }
 
    - if %quality% == Rare {
        - random 2
        - determine "Darkblade"
        - determine "Pain"
        }
 
    - if %quality% == Epic {
        - random 2
        - determine "Rune of Healing"
        - determine "Journeyman Boots"
        }

