# Custom Loot Table
# Tyler J. Sawyer
# 4-7-14
# Defines custom loot items for particular mobs when they are slain.

"customLootTable":
  type: world
  events:
    on entity death:
      - if <context.damager.is_player> {
        - if <context.entity.entity_type> == "Enderman" {
          - drop "i@<proc:LootTable_Enderman>" location:<context.entity.location>
          }
        - if <context.entity.entity_type> == "Zombie" {
          - drop "i@<proc:LootTable_Zombie>" location:<context.entity.location>
          }
        - if <context.entity.entity_type> == "Skeleton" {
          - drop "i@<proc:LootTable_Skeleton>" location:<context.entity.location>
          }
        - if <context.entity.entity_type> == "Creeper" {
          - drop "i@<proc:LootTable_Creeper>" location:<context.entity.location>
          }
        - if <context.entity.entity_type> == "Spider" {
          - drop "i@<proc:LootTable_Spider>" location:<context.entity.location>
          }
        - if <context.entity.name> == "Hate Fiend" {
          - drop "i@<proc:LootTable_HateKeep>" location:<context.entity.location>
          }
        - if <context.entity.name> == "Hate Sprite" {
          - drop "i@<proc:LootTable_HateKeep>" location:<context.entity.location>
          }
        - if <context.entity.name> == "Hate Golem" {
          - drop "i@<proc:LootTable_HateKeep>" location:<context.entity.location>
          }
        }

# Procedure based on an example from :
# http://scripts.citizensnpcs.co/view/34aapf
# 
"LootTable_Enderman":
    type: procedure

    script:
    - define roll <util.random.int[1].to[5000]>
    - if %roll% >= 0 && %roll% < 4000 define quality "Common"
      else if %roll% >= 4000 && %roll% < 4750 define quality "Uncommon"
      else if %roll% >= 4750 && %roll% < 4970 define quality "Rare"
      else if %roll% >= 4970 define quality "Epic"
 
    - if %quality% == Common {
      - random 5
      - determine "Enderparts"
      - determine "Endersoul" 
      - determine "Enderdust"
      - determine "Enderthread"
      - determine "Endermold"
      }
 
    - if %quality% == Uncommon {
        - random 10
        - determine "Enderplate Rings"
        - determine "Enderplate Block"
        - determine "Sword of Ender"
        - determine "Ender Scythe"
        - determine "Enderplate Chestpiece"
        - determine "Enderplate Leggings" 
        - determine "Enderplate Boots"
        - determine "Enderplate Helm" 
        - determine "Enderfish"
        - determine "Endercookie"
        }
 
    - if %quality% == Rare {
        - random 6
        - determine "Darkblade"
        - determine "Digmaster 5000"
        - determine "Runed Enderplate Helm"
        - determine "Runed Enderplate Chestpiece"
        - determine "Runed Enderplate Leggings"
        - determine "Runed Enderplate Boots"
        }
 
    - if %quality% == Epic {
        - random 2
        - determine "Rune of Healing"
        - determine "Journeyman Boots"
        }

"LootTable_Zombie":
    type: procedure

    script:
    - define roll <util.random.int[1].to[5000]>
    - if %roll% >= 0 && %roll% < 4000 define quality "Common"
      else if %roll% >= 4000 && %roll% < 4750 define quality "Uncommon"
      else if %roll% >= 4750 && %roll% < 4970 define quality "Rare"
      else if %roll% >= 4970 define quality "Epic"
 
    - if %quality% == Common {
      - random 20
      - determine "Rock"
      - determine "PetRock" 
      - determine "Pile of Dirt"
      - determine "Pile of Mud"
      - determine "Torn Sheet of Paper"
      - determine "Snapped Twig"
      - determine "Driftwood"
      - determine "Chunk of Flint"
      - determine "Marshmellow"
      - determine "Rusty Longsword"
      - determine "Rusty Shortsword"
      - determine "Rusty Two Handed Sword"
      - determine "Rusty Dagger"
      - determine "Rusty Rapier"
      - determine "Rusty Scimitar"
      - determine "Rusty Warhammer"
      - determine "Rusty Axe"
      - determine "Rusty Battleaxe"
      - determine "Rusty Great Axe"
      - determine "Rusty Scythe"
      }
 
    - if %quality% == Uncommon {
        - random 20
        - determine "Tarnished Longsword"
        - determine "Tarnished Shortsword"
        - determine "Tarnished Two Handed Sword"
        - determine "Tarnished Dagger"
        - determine "Tarnished Rapier"
        - determine "Tarnished Scimitar"
        - determine "Tarnished Warhammer"
        - determine "Tarnished Axe"
        - determine "Tarnished Battleaxe"
        - determine "Tarnished Great Axe"
        - determine "Tarnished Scythe"
        - determine "Leather Scraps"
        - determine "Patchwork Leather Hat"
        - determine "Patchwork Leather Tunic"
        - determine "Patchwork Leather Pants"
        - determine "Patchwork Leather Boots"
        - determine "Tattered Leather Hat"
        - determine "Tattered Leather Tunic"
        - determine "Tattered Leather Pants"
        - determine "Tattered Leather Boots"
        }
 
    - if %quality% == Rare {
        - random 4
        - determine "Ringmail Coif"
        - determine "Ringmail Tunic"
        - determine "Ringmail Leggings"
        - determine "Ringmail Boots"
        }
 
    - if %quality% == Epic {
        - random 3
        - determine "Nightblade"
        - determine "Willsapper"
        - determine "Eyepatch of Plunder"
        }

"LootTable_Skeleton":
    type: procedure

    script:
    - define roll <util.random.int[1].to[5000]>
    - if %roll% >= 0 && %roll% < 4000 define quality "Common"
      else if %roll% >= 4000 && %roll% < 4750 define quality "Uncommon"
      else if %roll% >= 4750 && %roll% < 4970 define quality "Rare"
      else if %roll% >= 4970 define quality "Epic"
 
    - if %quality% == Common {
      - random 20
      - determine "Rock"
      - determine "PetRock" 
      - determine "Pile of Dirt"
      - determine "Pile of Mud"
      - determine "Torn Sheet of Paper"
      - determine "Snapped Twig"
      - determine "Driftwood"
      - determine "Chunk of Flint"
      - determine "Marshmellow"
      - determine "Rusty Longsword"
      - determine "Rusty Shortsword"
      - determine "Rusty Two Handed Sword"
      - determine "Rusty Dagger"
      - determine "Rusty Rapier"
      - determine "Rusty Scimitar"
      - determine "Rusty Warhammer"
      - determine "Rusty Axe"
      - determine "Rusty Battleaxe"
      - determine "Rusty Great Axe"
      - determine "Rusty Scythe"
      }
 
    - if %quality% == Uncommon {
        - random 20
        - determine "Tarnished Longsword"
        - determine "Tarnished Shortsword"
        - determine "Tarnished Two Handed Sword"
        - determine "Tarnished Dagger"
        - determine "Tarnished Rapier"
        - determine "Tarnished Scimitar"
        - determine "Tarnished Warhammer"
        - determine "Tarnished Axe"
        - determine "Tarnished Battleaxe"
        - determine "Tarnished Great Axe"
        - determine "Tarnished Scythe"
        - determine "Leather Scraps"
        - determine "Patchwork Leather Hat"
        - determine "Patchwork Leather Tunic"
        - determine "Patchwork Leather Pants"
        - determine "Patchwork Leather Boots"
        - determine "Tattered Leather Hat"
        - determine "Tattered Leather Tunic"
        - determine "Tattered Leather Pants"
        - determine "Tattered Leather Boots"
        }
 
    - if %quality% == Rare {
        - random 4
        - determine "Ringmail Coif"
        - determine "Ringmail Tunic"
        - determine "Ringmail Leggings"
        - determine "Ringmail Boots"
        }
 
    - if %quality% == Epic {
        - random 3
        - determine "Nightblade"
        - determine "Willsapper"
        - determine "Eyepatch of Plunder"
        }

"LootTable_Creeper":
    type: procedure

    script:
    - define roll <util.random.int[1].to[5000]>
    - if %roll% >= 0 && %roll% < 4000 define quality "Common"
      else if %roll% >= 4000 && %roll% < 4750 define quality "Uncommon"
      else if %roll% >= 4750 && %roll% < 4970 define quality "Rare"
      else if %roll% >= 4970 define quality "Epic"
 
    - if %quality% == Common {
      - random 20
      - determine "Rock"
      - determine "PetRock" 
      - determine "Pile of Dirt"
      - determine "Pile of Mud"
      - determine "Torn Sheet of Paper"
      - determine "Snapped Twig"
      - determine "Driftwood"
      - determine "Chunk of Flint"
      - determine "Marshmellow"
      - determine "Rusty Longsword"
      - determine "Rusty Shortsword"
      - determine "Rusty Two Handed Sword"
      - determine "Rusty Dagger"
      - determine "Rusty Rapier"
      - determine "Rusty Scimitar"
      - determine "Rusty Warhammer"
      - determine "Rusty Axe"
      - determine "Rusty Battleaxe"
      - determine "Rusty Great Axe"
      - determine "Rusty Scythe"
      }
 
    - if %quality% == Uncommon {
        - random 20
        - determine "Tarnished Longsword"
        - determine "Tarnished Shortsword"
        - determine "Tarnished Two Handed Sword"
        - determine "Tarnished Dagger"
        - determine "Tarnished Rapier"
        - determine "Tarnished Scimitar"
        - determine "Tarnished Warhammer"
        - determine "Tarnished Axe"
        - determine "Tarnished Battleaxe"
        - determine "Tarnished Great Axe"
        - determine "Tarnished Scythe"
        - determine "Leather Scraps"
        - determine "Patchwork Leather Hat"
        - determine "Patchwork Leather Tunic"
        - determine "Patchwork Leather Pants"
        - determine "Patchwork Leather Boots"
        - determine "Tattered Leather Hat"
        - determine "Tattered Leather Tunic"
        - determine "Tattered Leather Pants"
        - determine "Tattered Leather Boots"
        }
 
    - if %quality% == Rare {
        - random 4
        - determine "Ringmail Coif"
        - determine "Ringmail Tunic"
        - determine "Ringmail Leggings"
        - determine "Ringmail Boots"
        }
 
    - if %quality% == Epic {
        - random 3
        - determine "Nightblade"
        - determine "Willsapper"
        - determine "Eyepatch of Plunder"
        }

"LootTable_Spider":
    type: procedure

    script:
    - define roll <util.random.int[1].to[5000]>
    - if %roll% >= 0 && %roll% < 4000 define quality "Common"
      else if %roll% >= 4000 && %roll% < 4750 define quality "Uncommon"
      else if %roll% >= 4750 && %roll% < 4970 define quality "Rare"
      else if %roll% >= 4970 define quality "Epic"
 
    - if %quality% == Common {
      - random 11
      - determine "Rock"
      - determine "PetRock" 
      - determine "Pile of Dirt"
      - determine "Pile of Mud"
      - determine "Torn Sheet of Paper"
      - determine "Snapped Twig"
      - determine "Driftwood"
      - determine "Chunk of Flint"
      - determine "Marshmellow"
      - determine "Dusty Cobwebs"
      - determine "Piece of String"
      }
 
    - if %quality% == Uncommon {
        - random 9
        - determine "Leather Scraps"
        - determine "Patchwork Leather Hat"
        - determine "Patchwork Leather Tunic"
        - determine "Patchwork Leather Pants"
        - determine "Patchwork Leather Boots"
        - determine "Tattered Leather Hat"
        - determine "Tattered Leather Tunic"
        - determine "Tattered Leather Pants"
        - determine "Tattered Leather Boots"
        }
 
    - if %quality% == Rare {
        - random 4
        - determine "Ringmail Coif"
        - determine "Ringmail Tunic"
        - determine "Ringmail Leggings"
        - determine "Ringmail Boots"
        }
 
    - if %quality% == Epic {
        - random 3
        - determine "Nightblade"
        - determine "Willsapper"
        - determine "Eyepatch of Plunder"
        }
        
"LootTable_HateKeep":
    type: procedure

    script:
    - define roll <util.random.int[1].to[10000]>
    - if %roll% >= 0 && %roll% < 9000 define quality "Common"
      else if %roll% >= 9000 && %roll% < 9800 define quality "Uncommon"
      else if %roll% >= 9800 && %roll% < 9950 define quality "Rare"
      else if %roll% >= 9950 define quality "Epic"
 
    - if %quality% == Common {
      - random 5
      - determine "Enderparts"
      - determine "Endersoul" 
      - determine "Enderdust"
      - determine "Enderthread"
      - determine "Endermold"
      }
 
    - if %quality% == Uncommon {
        - random 10
        - determine "Enderplate Chestpiece"
        - determine "Enderplate Leggings" 
        - determine "Enderplate Boots"
        - determine "Enderplate Helm" 
        - determine "Enderfish"
        - determine "Endercookie"
        - determine "Hatesteel Leggings"
        - determine "Hatesteel Boots"
        - determine "Hatesteel Chestpiece"
        - determine "Hatesteel Helm"
        }
 
    - if %quality% == Rare {
        - random 6
        - determine "Doom"
        - determine "Blue Harbinger"
        - determine "Runed Enderplate Helm"
        - determine "Runed Enderplate Chestpiece"
        - determine "Runed Enderplate Leggings"
        - determine "Runed Enderplate Boots"
        }
 
    - if %quality% == Epic {
        - random 2
        - determine "Hurricane"
        - determine "Bucket of Saturation"
        }